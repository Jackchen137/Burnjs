
一个企业级骨架
=====
通过上述几个步骤和规范，我们就定制了一套初级的企业级框架。虽然是初级版本，但是相比于基础koa框架来说，已经强大得很多了。


项目目录的规范总结
====

```
.
├── dist    ---->构建之后的文件夹
├── nodemon.json
├── package-lock.json
├── package.json
├── src    ---->源代码文件
│   ├── app.ts   ---->app的启动
│   ├── config   ---->配置的目录
│   │   ├── config.default.ts   --->公共配置
│   │   ├── config.dev.ts       --->开发配置
│   │   └── config.pro.ts       --->线上配置
│   ├── controller  ---->逻辑控制器的代码目录
│   │   ├── base.ts
│   │   └── user.ts
│   ├── loader.ts  ---->加载器
│   ├── router.ts   ---->路由器集合
│   └── service   ---->业务代码的目录
│       └── check.ts
└── tsconfig.json
```

概念总结
=====
经过上一章内容的完成，我们已经成功的引入了三组概念

- controller，专门处理业务的控制流程，尽量不出现任何的业务逻辑，而且controller必须放在controller文件夹中，否则无法读取到

- router，路由的设置，我们全部放在了routers.js中，集中化管理，使得我们的路由、Http方法不会因为散落各地而难以查找

- service ，业务逻辑与控制器完全分离，不依赖于控制器，能够方便你的逻辑复用和单元测试

- 全自动按目录加载：所有的代码，类，都按照规范写好后，就能够全自动的导入到项目中，无需人力再进行对这种无用但是又容易出错的操作进行乱七八糟的维护，极大的提升了我们开发业务代码的效率。

或许聪明的你已经发现了这么做的好处：**超出控制范围的代码框架连启动都无法启动，比如有人不爽，想到处写业务逻辑，boom，爆炸**。

**又比如，有人想到处乱写router，boom爆炸。**

由此，我们得出了一个深刻的道理：

**一定限制和约束，是企业级（包括个人）大项目所必须的**





企业级框架需要考虑更多的问题
=====
我们已经知道，**一定限制和约束，是企业级（包括个人）大项目所必须的**，但仅仅这一点是不够的。


数据库模块(orm)
=====
我们手工写sql会导致我们效率极低，而且容易出错。

orm的引入能够极大的提升我们的开发效率，在项目越早的时期引入，优势越明显。然而引入orm也是需要一套规范的。


集群应用(cluster)
=====
在开发环境下，我们的服务器是单线程，单进程的。单线程单进程最大的毛病就是无法利用多核cpu，还好nodejs给我们提供了强大的cluster模块。

简单来说，cluster模块就是：运行多个nodejs进程，并且做同样的事情，而且监听同一个端口。

但是，这紧紧是简单的一步，对于企业级框架，我们还需要考虑以下几个核心问题：
- 如何对这几个进程进行负载均衡?
- 如果某个进程挂掉，我们需要一种机制来进行自动重启。
- 启动的几个进程间如何通信？


快速部署
====
企业级框架必须要有快速部署的机制。

无论是开发环境部署，还是线上环境部署，一定要做到“一键”，杜绝手工操作。


日志系统
====
无论应用再强大，写代码的人多牛逼，都会出错。

一个大型应用，排查问题的关键，就在日志里排查。



等等等等


但是以上的内容，属于框架附加插件，我们可以在之后的实战讲解中慢慢添加这些功能。