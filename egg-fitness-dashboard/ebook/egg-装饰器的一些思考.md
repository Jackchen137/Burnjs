# 装饰器与中间件

>装饰器是语法糖

语法糖就是让你写起来更舒服，更爽快。

而实际上，熟悉koa的同学一定能看出来，装饰器从设计，到执行，非常像中间件。

几乎所有的中间件都可以用装饰器来实现，反之亦然。

# 装饰器与中间件的区别

在实践中，我个人认为中间件和装饰器最大的区别就是：**控制粒度**

全局性处理的我们适合用中间件
- 路由模块
- 日志模块
- 错误处理
- request.body或者response.body的加工和处理

局部性处理的我们适合使用装饰器
- 某个接口鉴权
- 某个接口的request.body或者response.body的特殊处理
- 请求参数校验

装饰器(模式)用途
- 依赖注入(dependency injection)
- 减少子类的代码膨胀
- 某个函数动态的增加一个新的功能或职责

所以 **koa/egg的中间件只是一个处理加工请求的一种拓展机制，而装饰器则更多的是一种设计模式.**






